# ============================================
# PBI Scheduler Environment Configuration
# ============================================
# Copy this file to .env and fill in the values
# DO NOT commit .env to version control

# ============================================
# Scheduler Database (backend)
# ============================================
# Used for scheduler state, job history, and metadata
SCHEDULER_DB_HOST=your-azure-postgres-server.postgres.database.azure.com
SCHEDULER_DB_PORT=5432
SCHEDULER_DB_NAME=backend
SCHEDULER_DB_USER=your_scheduler_user
SCHEDULER_DB_PASSWORD=your_secure_password
SCHEDULER_DB_SSL_MODE=require
SCHEDULER_DB_POOL_SIZE=5
SCHEDULER_DB_MAX_OVERFLOW=10

# ============================================
# PBI Database (esa_pbi)
# ============================================
# Used for pipeline data tables (rentroll, discount, etc.)
PBI_DB_HOST=your-azure-postgres-server.postgres.database.azure.com
PBI_DB_PORT=5432
PBI_DB_NAME=esa_pbi
PBI_DB_USER=your_pbi_user
PBI_DB_PASSWORD=your_secure_password
PBI_DB_SSL_MODE=require
PBI_DB_POOL_SIZE=10
PBI_DB_MAX_OVERFLOW=5

# ============================================
# Scheduler Configuration
# ============================================
SCHEDULER_WORKING_DIR=/var/www/backend/app/scheduler/python
SCHEDULER_TIMEZONE=Asia/Singapore
SCHEDULER_MAX_WORKERS=5
SCHEDULER_WEB_HOST=0.0.0.0
SCHEDULER_WEB_PORT=5000

# ============================================
# SOAP API Configuration
# ============================================
# For pipelines that use SOAP API (rentroll, discount, mimo, etc.)
SOAP_API_URL=https://your-soap-api-endpoint.com/api
SOAP_API_USERNAME=your_soap_user
SOAP_API_PASSWORD=your_soap_password

# ============================================
# SugarCRM API Configuration
# ============================================
SUGARCRM_URL=https://your-sugarcrm-instance.com
SUGARCRM_USERNAME=your_crm_user
SUGARCRM_PASSWORD=your_crm_password
SUGARCRM_CLIENT_ID=your_client_id
SUGARCRM_CLIENT_SECRET=your_client_secret

# ============================================
# Alert Configuration (Optional)
# ============================================
# Slack webhook for pipeline alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx/yyy/zzz
SLACK_CHANNEL=#data-pipeline-alerts

# Email alerts (optional)
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=alerts@your-domain.com
SMTP_PASSWORD=your_smtp_password
ALERT_FROM_ADDRESS=pbi-scheduler@your-domain.com
ALERT_TO_ADDRESSES=data-team@your-domain.com

# ============================================
# Logging
# ============================================
LOG_LEVEL=INFO
LOG_FILE=/var/log/pbi-scheduler/scheduler.log

# ============================================
# Backend Web App Authentication
# ============================================
# For web UI authentication (uses same auth as backend app)
BACKEND_AUTH_SECRET=your_backend_auth_secret
